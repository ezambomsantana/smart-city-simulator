% Copyright (C) 2008-2014 EDF R&D

% This file is part of Sim-Diasca.

% Sim-Diasca is free software: you can redistribute it and/or modify
% it under the terms of the GNU Lesser General Public License as
% published by the Free Software Foundation, either version 3 of
% the License, or (at your option) any later version.

% Sim-Diasca is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
% GNU Lesser General Public License for more details.

% You should have received a copy of the GNU Lesser General Public
% License along with Sim-Diasca.
% If not, see <http://www.gnu.org/licenses/>.

% Author: Olivier Boudeville (olivier.boudeville@edf.fr)


% Integration test for the soda deterministic example case.
%
% See also:
%
% - class_SodaVendingMachine.erl
% - class_DeterministicThirstyCustomer.erl
%
-module(smart_city_test).



% For all facilities common to all tests:
-include("test_constructs.hrl").



% Runs the test.
%
-spec run() -> no_return().
run() ->

	?test_start,

	% Use default simulation settings (50Hz, batch reproducible):
	SimulationSettings = #simulation_settings{

	  simulation_name = "Sim-Diasca Smart City Integration Test",

	  % Using 100Hz here:
	  tick_duration = 0.01

	  % We leave it to the default specification (all_outputs):
	  % result_specification =
	  %  [ { targeted_patterns, [ {".*",[data_and_plot]} ] },
	  %    { blacklisted_patterns, ["^Second" ] } ]

	  %result_specification = [ { targeted_patterns, [ {".*",data_only} ] } ]

	},


	DeploymentSettings = #deployment_settings{

		computing_hosts = { use_host_file_otherwise_local,
							"sim-diasca-host-candidates.txt" },

		%node_availability_tolerance = fail_on_unavailable_node,

		% We want to embed additionally this test and its specific
		% prerequisites, defined in the Mock Simulators:
		%
		additional_elements_to_deploy = [ { ".", code } ],

		% Note that the configuration file below has not to be declared above as
		% well:
		enable_data_exchanger = { true, [ "soda_parameters.cfg" ] },

		enable_performance_tracker = true

	},


	% Default load balancing settings (round-robin placement heuristic):
	LoadBalancingSettings = #load_balancing_settings{},

	% A deployment manager is created directly on the user node:
	DeploymentManagerPid = sim_diasca:init( SimulationSettings,
							   DeploymentSettings, LoadBalancingSettings ),


	%Car Routes

	_S1 = class_Actor:create_initial_actor( class_Semaphore,
		[ _S1NAME="sem_1", _S1LAT1=-23.562831, _S1LONG1=-46.656866, _S1LAT2=-23.563013, _S1LONG2=-46.656855 ] ),


	_S2 = class_Actor:create_initial_actor( class_Semaphore,
		[ _S2NAME="sem_2", _S2LAT1=-23.558931, _S2LONG1=-46.661278, _S2LAT2=-23.559117, _S2LONG2=-46.661296 ] ),

	% First Route - REbouÃ§as e Alameda Santos
	SVM1 = class_Actor:create_initial_actor( class_Route,
		[ _RouteaName="route_1", _Route=[{-23.555757,-46.662751},{-23.555584,-46.662936},{-23.555409,-46.663089},{-23.555204,-46.663322},{-23.555166,-46.663388},{-23.555145,-46.663444},{-23.555101,-46.663560},{-23.555083,-46.663647},{-23.555080,-46.663776},{-23.555078,-46.663852},{-23.555105,-46.664085},{-23.555183,-46.664251},{-23.555276,-46.664389},{-23.555906,-46.664848},{-23.556150,-46.665076},{-23.556373,-46.665345},{-23.556569,-46.665636},{-23.556871,-46.666110},{-23.556922,-46.666145},{-23.556975,-46.666156},{-23.557013,-46.666150},{-23.557055,-46.666115},{-23.557064,-46.666072},{-23.557058,-46.666015},{-23.556886,-46.665694},{-23.556801,-46.665521},{-23.556588,-46.664531},{-23.556468,-46.664025},{-23.556521,-46.663990},{-23.557397,-46.662999},{-23.558219,-46.662078},{-23.559008,-46.661119},{-23.559918,-46.660153},{-23.560828,-46.659092},{-23.560930,-46.658978},{-23.561779,-46.658053},{-23.561995,-46.657797},{-23.562790,-46.656897},{-23.562953,-46.656712, _S1, 1},{-23.563559,-46.655912},{-23.563785,-46.655614},{-23.564583,-46.654657},{-23.565168,-46.653972},{-23.565320,-46.653794},{-23.565812,-46.653218},{-23.567026,-46.651776},{-23.568506,-46.649968},{-23.568573,-46.649886},{-23.568653,-46.649788},{-23.569088,-46.649256},{-23.569790,-46.648306},{-23.569829,-46.648252},{-23.570485,-46.647380},{-23.570532,-46.647317},{-23.571095,-46.646556},{-23.571139,-46.646498},{-23.571191,-46.646435},{-23.571947,-46.645534},{-23.572161,-46.645419},{-23.573146,-46.644971},{-23.574135,-46.644507},{-23.573748,-46.643512},{-23.573339,-46.642577},{-23.573306,-46.642505},{-23.573278,-46.642445},{-23.573232,-46.642341},{-23.573045,-46.641887},{-23.572970,-46.641864},{-23.572414,-46.641909},{-23.570636,-46.642055},{-23.570593,-46.641408},{-23.570722,-46.641250},{-23.570880,-46.641147},{-23.572489,-46.641329},{-23.572707,-46.641354},{-23.574017,-46.641502},{-23.574542,-46.641596},{-23.574727,-46.641632}]] ),

	% Second Route - 9 de julho
	SVM2 = class_Actor:create_initial_actor( class_Route,
		[ _RouteaName2="route_2", _Route2=[{-23.574022,-46.666944},{-23.574021,-46.666949},{-23.573943,-46.667032},{-23.573885,-46.666951},{-23.573354,-46.666207},{-23.572491,-46.665001},{-23.572396,-46.664868},{-23.572342,-46.664795},{-23.571421,-46.663456},{-23.571353,-46.663355},{-23.571298,-46.663278},{-23.570806,-46.662572},{-23.570656,-46.662391},{-23.570359,-46.662075},{-23.570218,-46.661941},{-23.568789,-46.660551},{-23.568724,-46.660484},{-23.568638,-46.660409},{-23.567664,-46.659483},{-23.567210,-46.659053},{-23.567143,-46.658988},{-23.567065,-46.658914},{-23.566441,-46.658252},{-23.566376,-46.658192},{-23.565620,-46.657442},{-23.565542,-46.657365},{-23.565393,-46.657238},{-23.565144,-46.657077},{-23.564933,-46.656989},{-23.564654,-46.656918},{-23.564527,-46.656888},{-23.560584,-46.655021},{-23.560316,-46.654819},{-23.559197,-46.653984},{-23.559004,-46.653831},{-23.558742,-46.653666},{-23.558494,-46.653499},{-23.558311,-46.653342},{-23.557961,-46.652942},{-23.557515,-46.652035},{-23.556412,-46.650264},{-23.556207,-46.650051},{-23.556124,-46.649975},{-23.556075,-46.649845},{-23.555990,-46.649708},{-23.555902,-46.649607},{-23.555757,-46.649512},{-23.555719,-46.649493},{-23.555622,-46.649484},{-23.555553,-46.649379},{-23.555314,-46.649082},{-23.555105,-46.648835},{-23.554835,-46.648586},{-23.553850,-46.648066}]] ),

	% Third Route - Augusta
	SVM3 = class_Actor:create_initial_actor( class_Route,
		[ _RouteaName3="route_3", _Route3=[{-23.564309,-46.678007},{-23.564340,-46.677989},{-23.564395,-46.677947},{-23.564426,-46.677923},{-23.564602,-46.677790},{-23.564746,-46.677637},{-23.565402,-46.676747},{-23.565434,-46.676703},{-23.566028,-46.675914},{-23.566088,-46.675833},{-23.566142,-46.675754},{-23.566664,-46.674989},{-23.566730,-46.674892},{-23.566813,-46.674803},{-23.567741,-46.673807},{-23.567823,-46.673717},{-23.568442,-46.673046},{-23.568500,-46.672984},{-23.568672,-46.672796},{-23.569094,-46.672391},{-23.569212,-46.672419},{-23.569312,-46.672432},{-23.569388,-46.672427},{-23.569459,-46.672405},{-23.569536,-46.672362},{-23.569618,-46.672279},{-23.569448,-46.672104},{-23.569406,-46.672061},{-23.569300,-46.671944},{-23.569246,-46.671888},{-23.568087,-46.670671},{-23.567461,-46.670041},{-23.567151,-46.669720},{-23.566970,-46.669525},{-23.566520,-46.669047},{-23.565593,-46.668082},{-23.564696,-46.667148},{-23.563681,-46.666088},{-23.562640,-46.665003},{-23.561608,-46.663919},{-23.560768,-46.662945},{-23.559866,-46.662016},{-23.559008,-46.661119},{-23.558106,-46.660277},{-23.557993,-46.660157},{-23.557896,-46.660052},{-23.556895,-46.658972},{-23.556214,-46.658237},{-23.555525,-46.657500},{-23.554819,-46.656756},{-23.553923,-46.655796},{-23.553422,-46.655292},{-23.553294,-46.655103},{-23.553171,-46.654905},{-23.552887,-46.654338},{-23.552484,-46.653605},{-23.552174,-46.653014},{-23.552082,-46.652791},{-23.552024,-46.652601},{-23.551029,-46.649583},{-23.550605,-46.648224},{-23.550536,-46.648039},{-23.550127,-46.646841},{-23.550090,-46.646736},{-23.549972,-46.646343},{-23.549927,-46.646193},{-23.549556,-46.646309},{-23.549512,-46.646260},{-23.549307,-46.645620},{-23.549202,-46.645552},{-23.549066,-46.645529},{-23.548368,-46.645428},{-23.547425,-46.645334},{-23.547632,-46.644193},{-23.547806,-46.643281},{-23.547883,-46.642881},{-23.547892,-46.642694},{-23.547846,-46.642589},{-23.547680,-46.641478},{-23.547471,-46.639998},{-23.547465,-46.639967},{-23.547428,-46.639845},{-23.547401,-46.639757},{-23.547260,-46.639644},{-23.547145,-46.639568},{-23.546468,-46.639182},{-23.546006,-46.638896},{-23.545858,-46.638771},{-23.545986,-46.638624},{-23.546272,-46.638273},{-23.546308,-46.638222},{-23.547014,-46.637225},{-23.547247,-46.636994},{-23.547364,-46.636911},{-23.547456,-46.636863},{-23.547555,-46.636917},{-23.547555,-46.636917}]] ),

	% Fourth Route - Paulista
	SVM4 = class_Actor:create_initial_actor(class_Route,
		[ _RouteName4="route_4", _Route4=[ {-23.571888,-46.643387},{-23.571602,-46.643732},{-23.571186,-46.644217},{-23.570871,-46.644619},{-23.570281,-46.645371},{-23.569631,-46.646200},{-23.569445,-46.646437},{-23.569063,-46.646973},{-23.568805,-46.647344},{-23.568565,-46.647662},{-23.567636,-46.648850},{-23.567531,-46.648977},{-23.567469,-46.649050},{-23.566167,-46.650596},{-23.566021,-46.650770},{-23.565633,-46.651243},{-23.565074,-46.651926},{-23.564824,-46.652230},{-23.564452,-46.652685},{-23.563934,-46.653317},{-23.563608,-46.653716},{-23.563438,-46.653916},{-23.563071,-46.654356},{-23.562668,-46.654839},{-23.562604,-46.654915},{-23.562237,-46.655377},{-23.561962,-46.655740},{-23.561664,-46.656076},{-23.561309,-46.656461},{-23.561060,-46.656739},{-23.560788,-46.657043},{-23.560657,-46.657194},{-23.560142,-46.657784},{-23.559977,-46.657974},{-23.559642,-46.658346},{-23.559124,-46.658923},{-23.559033,-46.659022},{-23.558220,-46.659910},{-23.557993,-46.660157},{-23.557748,-46.660449},{-23.557436,-46.660821},{-23.557212,-46.661011},{-23.557094,-46.661109},{-23.556588,-46.661708} ]]),

	B1Routes = [SVM3],

	B2Routes = [SVM2],

	B3Routes = [SVM1],

	B4Routes = [SVM4],

	% Houses

	_B1 = class_Actor:create_initial_actor( class_Building,
		[ _B1NAME="building_1", _B1LAT=-23.555757, _B1LONG=-46.662751, _Routes1 = B1Routes ] ),

	_B2 = class_Actor:create_initial_actor( class_Building,
		[ _B2NAME="building_2", _B2LAT=-23.574022, _B2LONG=-46.666944, _Routes2 = B2Routes ] ),

	_B3 = class_Actor:create_initial_actor( class_Building,
		[ _B3NAME="building_3", _B3LAT=-23.564309, _B3LONG=-46.678007, _Routes3 = B3Routes ] ),

	_B4 = class_Actor:create_initial_actor( class_Building,
		[ _B4NAME="building_4", _B4LAT=-23.571888, _B4LONG=-46.643387, _Routes4 = B4Routes ] ),

	%Sensors

	_SEN1 = class_Actor:create_initial_actor( class_Sensor,
		[ _SensorName1="sensor_1", _SensorLat1=-23.570813 , _SensorLong1=-46.656108 , _SensorType1 = rain ] ),

	_SEN2 = class_Actor:create_initial_actor( class_Sensor,
		[ _SensorName2="sensor_2", _SensorLat2=-23.547225, _SensorLong2=-46.636808 , _SensorType2 = air_polluition ] ),

	_SEN3 = class_Actor:create_initial_actor( class_Sensor,
		[ _SensorName3="sensor_3", _SensorLat3=-23.563478, _SensorLong3=-46.667352 , _SensorType3 = rain ] ),

	_SEN4 = class_Actor:create_initial_actor( class_Sensor,
		[ _SensorName4="sensor_4", _SensorLat4=-23.562101, _SensorLong4=-46.651345 , _SensorType4 = temperature] ),

	%Terminals

	TR1 = class_Actor:create_initial_actor( class_Route,
		[ _TNRoute1="bus_route_1", _TRoute1=[{-23.549311,-46.639597},{-23.549342,-46.639729},{-23.549340,-46.640067},{-23.549371,-46.640160},{-23.549425,-46.640209},{-23.549524,-46.640174},{-23.549682,-46.640487},{-23.549781,-46.640575},{-23.549853,-46.640727},{-23.550450,-46.641990},{-23.550484,-46.642108},{-23.550677,-46.642547},{-23.551035,-46.643446},{-23.551692,-46.645024},{-23.551880,-46.645521},{-23.551794,-46.645525},{-23.551415,-46.645666},{-23.551382,-46.645674},{-23.550832,-46.645856},{-23.550709,-46.645899},{-23.549927,-46.646193},{-23.549972,-46.646343},{-23.550090,-46.646736},{-23.550127,-46.646841},{-23.550536,-46.648039},{-23.550605,-46.648224},{-23.551029,-46.649583},{-23.552024,-46.652601},{-23.552082,-46.652791},{-23.552174,-46.653014},{-23.552484,-46.653605},{-23.552887,-46.654338},{-23.553171,-46.654905},{-23.553294,-46.655103},{-23.553422,-46.655292},{-23.553923,-46.655796},{-23.554819,-46.656756},{-23.555525,-46.657500},{-23.556214,-46.658237},{-23.555457,-46.659108},{-23.554729,-46.659903},{-23.554681,-46.659955},{-23.554050,-46.660732},{-23.553997,-46.660797},{-23.553870,-46.660996},{-23.555033,-46.662310},{-23.555540,-46.662882},{-23.555630,-46.662980},{-23.555820,-46.663186},{-23.555972,-46.663388},{-23.556097,-46.663592},{-23.556206,-46.663829},{-23.556280,-46.664043},{-23.556359,-46.664313},{-23.556439,-46.664711},{-23.556458,-46.664991},{-23.556506,-46.665353},{-23.556569,-46.665636},{-23.556912,-46.666330},{-23.557021,-46.666494},{-23.557343,-46.666963},{-23.557788,-46.667561},{-23.557871,-46.667666},{-23.558542,-46.668676},{-23.560230,-46.671743},{-23.560369,-46.672003},{-23.561046,-46.673125},{-23.561610,-46.674073},{-23.561928,-46.674582},{-23.562199,-46.674933},{-23.562244,-46.674992},{-23.562891,-46.675809},{-23.562922,-46.675850},{-23.562954,-46.675893},{-23.563440,-46.676573},{-23.563582,-46.676839},{-23.563983,-46.677584},{-23.564080,-46.677766},{-23.564139,-46.677876},{-23.564231,-46.678062},{-23.564443,-46.678446},{-23.564489,-46.678533},{-23.564565,-46.678680},{-23.565128,-46.679759},{-23.565167,-46.679835},{-23.565550,-46.680581},{-23.565582,-46.680642},{-23.566898,-46.683131},{-23.567264,-46.683844},{-23.567557,-46.684390},{-23.567633,-46.684531},{-23.567685,-46.684632},{-23.567722,-46.684702},{-23.568084,-46.685405},{-23.568264,-46.685728},{-23.568625,-46.686400},{-23.568669,-46.686476},{-23.569145,-46.687296},{-23.569227,-46.687515},{-23.569260,-46.687583},{-23.569297,-46.687661},{-23.569409,-46.687785},{-23.569496,-46.687926},{-23.570225,-46.689380},{-23.570732,-46.690385},{-23.570915,-46.691115},{-23.571071,-46.691825},{-23.571212,-46.693078},{-23.571202,-46.693454},{-23.571255,-46.693992},{-23.571260,-46.694098},{-23.571294,-46.694446},{-23.571315,-46.694640},{-23.571351,-46.694842},{-23.571396,-46.695025},{-23.571421,-46.695201},{-23.571471,-46.695779},{-23.571488,-46.695945},{-23.571515,-46.696188},{-23.571528,-46.696296},{-23.571730,-46.698174},{-23.571862,-46.699196},{-23.572061,-46.700140},{-23.572094,-46.700388},{-23.572263,-46.702026},{-23.572282,-46.702110},{-23.572254,-46.702285},{-23.572186,-46.702446},{-23.572148,-46.702614},{-23.572118,-46.702791},{-23.572103,-46.703019},{-23.572129,-46.703301},{-23.572211,-46.703610},{-23.572352,-46.704054},{-23.572467,-46.704341},{-23.572534,-46.704506},{-23.572597,-46.704627},{-23.572756,-46.704929},{-23.573131,-46.705706},{-23.573205,-46.705876},{-23.573254,-46.705987},{-23.573326,-46.706141},{-23.573513,-46.706359},{-23.573735,-46.706483},{-23.573979,-46.706567},{-23.574409,-46.706759},{-23.574875,-46.706977},{-23.575181,-46.707120},{-23.575737,-46.707377},{-23.576040,-46.707501},{-23.576499,-46.707713},{-23.577545,-46.708202},{-23.577759,-46.708324},{-23.577981,-46.708475},{-23.578069,-46.708569},{-23.578237,-46.708750},{-23.578379,-46.708970},{-23.578411,-46.709019},{-23.579166,-46.710319},{-23.579228,-46.710416},{-23.579378,-46.710563},{-23.579487,-46.710670},{-23.579572,-46.710762},{-23.581042,-46.711612},{-23.581377,-46.711848},{-23.581394,-46.711861},{-23.581437,-46.711897},{-23.581634,-46.712056},{-23.581987,-46.712471},{-23.582257,-46.712862},{-23.582494,-46.713329},{-23.582914,-46.714308},{-23.582976,-46.714464},{-23.583042,-46.714606},{-23.583516,-46.715806},{-23.583925,-46.716857},{-23.584042,-46.717105},{-23.584337,-46.717559},{-23.584390,-46.717657},{-23.584493,-46.717815},{-23.584578,-46.718009},{-23.584655,-46.718264},{-23.584747,-46.718771},{-23.584766,-46.719040},{-23.584783,-46.719149},{-23.584804,-46.719351},{-23.584819,-46.719494},{-23.585045,-46.720403},{-23.585181,-46.720815},{-23.585343,-46.721255},{-23.585690,-46.722057},{-23.585976,-46.722787},{-23.586336,-46.723809},{-23.586486,-46.724236},{-23.586504,-46.724286},{-23.586578,-46.724442},{-23.586771,-46.724939},{-23.587094,-46.725743},{-23.587350,-46.726174},{-23.587743,-46.726762},{-23.588076,-46.727285},{-23.588401,-46.727796},{-23.588438,-46.727859},{-23.588811,-46.728505},{-23.588857,-46.728585},{-23.588992,-46.728799},{-23.589186,-46.729054},{-23.589404,-46.729274},{-23.590217,-46.730046},{-23.591937,-46.731681},{-23.592021,-46.731761},{-23.592122,-46.731896},{-23.592304,-46.732295},{-23.593324,-46.734631},{-23.593496,-46.735051},{-23.593520,-46.735109},{-23.593787,-46.735686},{-23.594019,-46.736232},{-23.594055,-46.736316},{-23.594512,-46.737349},{-23.595093,-46.738664},{-23.595194,-46.738806},{-23.595629,-46.739134},{-23.596101,-46.739474},{-23.596158,-46.739516},{-23.596685,-46.739895},{-23.597078,-46.740179},{-23.598022,-46.740794},{-23.598076,-46.740824},{-23.598184,-46.740884},{-23.598468,-46.741042},{-23.599200,-46.741465},{-23.599708,-46.741828},{-23.600015,-46.742095},{-23.600202,-46.742257},{-23.600482,-46.742496},{-23.600544,-46.742548},{-23.601122,-46.743039},{-23.601203,-46.743108},{-23.601633,-46.743496},{-23.602200,-46.744002},{-23.602395,-46.744152},{-23.602570,-46.744248},{-23.602650,-46.744308},{-23.602745,-46.744379},{-23.602970,-46.744512},{-23.603167,-46.744631},{-23.604224,-46.745277},{-23.604697,-46.745696},{-23.605197,-46.746255},{-23.605380,-46.746571},{-23.605414,-46.746632},{-23.605775,-46.747174},{-23.605922,-46.747456},{-23.605972,-46.747553},{-23.606083,-46.747805},{-23.606313,-46.748506},{-23.607024,-46.750944},{-23.607082,-46.751134},{-23.607255,-46.751450},{-23.607481,-46.751617},{-23.607575,-46.751671},{-23.607675,-46.751690},{-23.607925,-46.751716},{-23.608318,-46.751783},{-23.608666,-46.751873},{-23.608872,-46.751901},{-23.609211,-46.752064},{-23.609382,-46.752179},{-23.609463,-46.752232},{-23.609593,-46.752315},{-23.609736,-46.752377},{-23.609915,-46.752426},{-23.610110,-46.752448},{-23.610387,-46.752532},{-23.610473,-46.752591},{-23.610534,-46.752658},{-23.611007,-46.753313},{-23.611320,-46.753885},{-23.611520,-46.754226},{-23.611528,-46.754240},{-23.611574,-46.754339},{-23.611631,-46.754357},{-23.611962,-46.754478},{-23.612216,-46.754577},{-23.612347,-46.754660},{-23.612608,-46.754831},{-23.612828,-46.755011},{-23.613160,-46.755231},{-23.613427,-46.755367},{-23.614138,-46.755652},{-23.614355,-46.755746},{-23.614570,-46.755877},{-23.614793,-46.756033},{-23.615399,-46.756542},{-23.615698,-46.756811},{-23.615977,-46.756974},{-23.616766,-46.757368},{-23.616969,-46.757513},{-23.617332,-46.757831},{-23.617552,-46.758094},{-23.617766,-46.758390},{-23.617931,-46.758533},{-23.618071,-46.758588},{-23.618219,-46.758603},{-23.618380,-46.758576},{-23.618587,-46.758498},{-23.618765,-46.758426},{-23.619523,-46.758137},{-23.619940,-46.757978},{-23.620439,-46.757787},{-23.620749,-46.757722},{-23.620926,-46.757729},{-23.621101,-46.757761},{-23.621359,-46.757856},{-23.621562,-46.757988},{-23.621720,-46.758136},{-23.621833,-46.758289},{-23.621943,-46.758472},{-23.622052,-46.758763},{-23.622084,-46.758934},{-23.622098,-46.759617},{-23.622163,-46.760578},{-23.622248,-46.761045},{-23.622328,-46.761525},{-23.622424,-46.762008},{-23.622563,-46.762563},{-23.622816,-46.763152},{-23.623092,-46.763555},{-23.623200,-46.763718},{-23.623539,-46.764075},{-23.623829,-46.764279},{-23.624060,-46.764379},{-23.624374,-46.764529},{-23.624654,-46.764674},{-23.625099,-46.765044},{-23.626291,-46.766045},{-23.627478,-46.767037},{-23.627832,-46.767343},{-23.627996,-46.767493},{-23.628019,-46.767516},{-23.628061,-46.767558},{-23.628215,-46.767713},{-23.628523,-46.768081},{-23.628741,-46.768452},{-23.629314,-46.769545},{-23.629411,-46.769650},{-23.629598,-46.769853},{-23.629804,-46.770044},{-23.630508,-46.770753},{-23.630683,-46.770912},{-23.631000,-46.771185},{-23.631479,-46.771576},{-23.631651,-46.771722},{-23.631661,-46.771729} ]]),

	TR2 = class_Actor:create_initial_actor( class_Route,
		[ _TNRoute2="bus_route_2", _TRoute2=[{-23.549311,-46.639597},{-23.549342,-46.639729},{-23.549340,-46.640067},{-23.549371,-46.640160},{-23.549425,-46.640209},{-23.549524,-46.640174},{-23.549682,-46.640487},{-23.549781,-46.640575},{-23.549853,-46.640727},{-23.550450,-46.641990},{-23.550484,-46.642108},{-23.550677,-46.642547},{-23.551035,-46.643446},{-23.551692,-46.645024},{-23.551880,-46.645521},{-23.551794,-46.645525},{-23.551415,-46.645666},{-23.551382,-46.645674},{-23.550832,-46.645856},{-23.550709,-46.645899},{-23.549927,-46.646193},{-23.549972,-46.646343},{-23.550090,-46.646736},{-23.550127,-46.646841},{-23.550536,-46.648039},{-23.550605,-46.648224},{-23.551029,-46.649583},{-23.552024,-46.652601},{-23.552082,-46.652791},{-23.552174,-46.653014},{-23.552484,-46.653605},{-23.552887,-46.654338},{-23.553171,-46.654905},{-23.553294,-46.655103},{-23.553422,-46.655292},{-23.553923,-46.655796},{-23.554819,-46.656756},{-23.555525,-46.657500},{-23.556214,-46.658237},{-23.556895,-46.658972},{-23.557896,-46.660052},{-23.557993,-46.660157},{-23.557748,-46.660449},{-23.557436,-46.660821},{-23.557189,-46.661177},{-23.556043,-46.662445},{-23.555584,-46.662936},{-23.555503,-46.663077},{-23.555471,-46.663147},{-23.555454,-46.663184},{-23.555420,-46.663274},{-23.555375,-46.663508},{-23.555373,-46.663637},{-23.555386,-46.663758},{-23.555419,-46.663916},{-23.555474,-46.664086},{-23.555833,-46.664992},{-23.555946,-46.665353},{-23.555963,-46.665423},{-23.555978,-46.665499},{-23.555993,-46.665686},{-23.555974,-46.666019},{-23.555931,-46.666199},{-23.555841,-46.666423},{-23.555729,-46.666639},{-23.555538,-46.667015},{-23.555322,-46.667535},{-23.555256,-46.667684},{-23.555182,-46.667870},{-23.554623,-46.669204},{-23.554100,-46.670649},{-23.553703,-46.671546},{-23.553628,-46.671716},{-23.553597,-46.671791},{-23.552794,-46.673731},{-23.552896,-46.673901},{-23.552980,-46.674034},{-23.553606,-46.675064},{-23.553651,-46.675138},{-23.554291,-46.676178},{-23.554331,-46.676244},{-23.554369,-46.676304},{-23.554959,-46.677293},{-23.555001,-46.677364},{-23.555040,-46.677429},{-23.555591,-46.678338},{-23.556177,-46.679314},{-23.556747,-46.680282},{-23.557339,-46.681237},{-23.557493,-46.681492},{-23.557647,-46.681744},{-23.557711,-46.681859},{-23.557850,-46.682087},{-23.557932,-46.682228},{-23.557991,-46.682331},{-23.558507,-46.683142},{-23.559062,-46.684046},{-23.559183,-46.684253},{-23.559574,-46.684924},{-23.560090,-46.685766},{-23.560148,-46.685860},{-23.560277,-46.686070},{-23.560731,-46.686843},{-23.561300,-46.687778},{-23.561873,-46.688720},{-23.562174,-46.689215},{-23.562472,-46.689712},{-23.562985,-46.690679},{-23.563224,-46.691083},{-23.563475,-46.691504},{-23.563530,-46.691595},{-23.563585,-46.691681},{-23.564062,-46.692494},{-23.564167,-46.692587},{-23.564566,-46.693200},{-23.564811,-46.693605},{-23.564907,-46.693763},{-23.564947,-46.693969},{-23.564947,-46.694141},{-23.564946,-46.694405},{-23.564946,-46.694500},{-23.564947,-46.694592},{-23.564949,-46.694702},{-23.564949,-46.694787},{-23.564971,-46.695360},{-23.564983,-46.695444},{-23.565045,-46.695534},{-23.565143,-46.695657},{-23.565187,-46.695817},{-23.565247,-46.696520},{-23.565252,-46.696592},{-23.565351,-46.698138},{-23.565284,-46.699165},{-23.565220,-46.699247},{-23.565116,-46.700079},{-23.565012,-46.701063},{-23.565459,-46.701094} ]]),

	TR3 = class_Actor:create_initial_actor( class_Route,
		[ _TNRoute3="bus_route_3", _TRoute3=[ {-23.631586,-46.771665},{-23.631651,-46.771722},{-23.631837,-46.771901},{-23.631945,-46.771990},{-23.632404,-46.772398},{-23.632895,-46.772848},{-23.633068,-46.773035},{-23.633115,-46.773094},{-23.633198,-46.773214},{-23.633424,-46.773521},{-23.633484,-46.773603},{-23.633693,-46.773902},{-23.633755,-46.773950},{-23.633796,-46.773960},{-23.633839,-46.773951},{-23.633533,-46.773534},{-23.633489,-46.773475},{-23.633438,-46.773407},{-23.633130,-46.772993},{-23.632959,-46.772793},{-23.632458,-46.772325},{-23.631753,-46.771678},{-23.631480,-46.771443},{-23.631086,-46.771100},{-23.631007,-46.771032},{-23.630752,-46.770822},{-23.629897,-46.770028},{-23.629807,-46.769933},{-23.629691,-46.769811},{-23.629453,-46.769564},{-23.629390,-46.769491},{-23.629194,-46.769150},{-23.629023,-46.768853},{-23.628799,-46.768405},{-23.628595,-46.768067},{-23.628453,-46.767868},{-23.628126,-46.767509},{-23.628072,-46.767458},{-23.627533,-46.766988},{-23.627054,-46.766591},{-23.626641,-46.766255},{-23.626337,-46.766003},{-23.626182,-46.765867},{-23.625742,-46.765491},{-23.625296,-46.765115},{-23.625162,-46.765003},{-23.625042,-46.764909},{-23.624707,-46.764617},{-23.624457,-46.764477},{-23.624099,-46.764312},{-23.623855,-46.764193},{-23.623468,-46.763872},{-23.623237,-46.763608},{-23.623163,-46.763531},{-23.622868,-46.763071},{-23.622775,-46.762868},{-23.622660,-46.762518},{-23.622492,-46.761991},{-23.622228,-46.760507},{-23.622182,-46.759950},{-23.622159,-46.759434},{-23.622155,-46.758920},{-23.622093,-46.758671},{-23.622000,-46.758442},{-23.621905,-46.758263},{-23.621771,-46.758062},{-23.621582,-46.757899},{-23.621357,-46.757769},{-23.621109,-46.757686},{-23.620939,-46.757654},{-23.620786,-46.757644},{-23.620740,-46.757651},{-23.620434,-46.757714},{-23.619489,-46.758059},{-23.618786,-46.758339},{-23.618754,-46.758352},{-23.618356,-46.758504},{-23.618205,-46.758521},{-23.618077,-46.758508},{-23.617964,-46.758461},{-23.617822,-46.758346},{-23.617611,-46.758060},{-23.617383,-46.757782},{-23.617003,-46.757439},{-23.616828,-46.757319},{-23.616730,-46.757269},{-23.616197,-46.756992},{-23.615844,-46.756813},{-23.615637,-46.756660},{-23.615158,-46.756222},{-23.614957,-46.756050},{-23.614738,-46.755882},{-23.614458,-46.755712},{-23.614235,-46.755598},{-23.613974,-46.755493},{-23.613526,-46.755337},{-23.613273,-46.755204},{-23.613078,-46.755097},{-23.612941,-46.755002},{-23.612650,-46.754753},{-23.612568,-46.754694},{-23.612409,-46.754597},{-23.612207,-46.754487},{-23.611913,-46.754380},{-23.611821,-46.754349},{-23.611759,-46.754323},{-23.611630,-46.754118},{-23.611584,-46.754034},{-23.611445,-46.753781},{-23.611154,-46.753336},{-23.610868,-46.752902},{-23.610790,-46.752783},{-23.610653,-46.752582},{-23.610548,-46.752463},{-23.610441,-46.752383},{-23.610338,-46.752345},{-23.610173,-46.752303},{-23.610010,-46.752309},{-23.609913,-46.752281},{-23.609786,-46.752204},{-23.609589,-46.752043},{-23.609335,-46.751843},{-23.608901,-46.751673},{-23.608467,-46.751572},{-23.608240,-46.751518},{-23.607800,-46.751374},{-23.607575,-46.751289},{-23.607305,-46.751207},{-23.607209,-46.751094},{-23.607127,-46.750938},{-23.606265,-46.747946},{-23.606120,-46.747620},{-23.606092,-46.747558},{-23.606067,-46.747500},{-23.605923,-46.747233},{-23.605561,-46.746677},{-23.605494,-46.746574},{-23.605244,-46.746165},{-23.605036,-46.745944},{-23.604776,-46.745666},{-23.604319,-46.745244},{-23.603429,-46.744678},{-23.603117,-46.744481},{-23.602845,-46.744308},{-23.602769,-46.744260},{-23.602448,-46.744038},{-23.602286,-46.743920},{-23.602270,-46.743907},{-23.601980,-46.743670},{-23.601611,-46.743367},{-23.601327,-46.743096},{-23.601288,-46.743059},{-23.600703,-46.742557},{-23.600632,-46.742496},{-23.599735,-46.741753},{-23.599255,-46.741401},{-23.598805,-46.741141},{-23.598261,-46.740826},{-23.598205,-46.740793},{-23.597644,-46.740456},{-23.597234,-46.740183},{-23.596709,-46.739815},{-23.596253,-46.739494},{-23.596194,-46.739453},{-23.595309,-46.738799},{-23.595214,-46.738699},{-23.595124,-46.738537},{-23.594677,-46.737503},{-23.594194,-46.736384},{-23.594145,-46.736271},{-23.594047,-46.736053},{-23.593690,-46.735253},{-23.593643,-46.735149},{-23.593355,-46.734486},{-23.592940,-46.733532},{-23.592212,-46.731881},{-23.592160,-46.731763},{-23.592102,-46.731706},{-23.591200,-46.730834},{-23.590743,-46.730393},{-23.589467,-46.729185},{-23.589363,-46.729086},{-23.589035,-46.728682},{-23.588951,-46.728525},{-23.588565,-46.727848},{-23.588338,-46.727478},{-23.588195,-46.727245},{-23.588117,-46.727118},{-23.587301,-46.725847},{-23.587137,-46.725501},{-23.587052,-46.725277},{-23.587001,-46.725143},{-23.586885,-46.724880},{-23.586720,-46.724480},{-23.586694,-46.724416},{-23.586617,-46.724269},{-23.586063,-46.722693},{-23.585658,-46.721683},{-23.585424,-46.721168},{-23.585227,-46.720636},{-23.585137,-46.720317},{-23.584973,-46.719574},{-23.584956,-46.719498},{-23.584874,-46.718903},{-23.584857,-46.718676},{-23.584805,-46.718325},{-23.584726,-46.718046},{-23.584645,-46.717845},{-23.584547,-46.717651},{-23.584511,-46.717589},{-23.584456,-46.717506},{-23.584160,-46.717074},{-23.584082,-46.716907},{-23.583955,-46.716592},{-23.583082,-46.714423},{-23.583029,-46.714293},{-23.582851,-46.713869},{-23.582712,-46.713540},{-23.582512,-46.713111},{-23.582349,-46.712812},{-23.582050,-46.712395},{-23.581767,-46.712059},{-23.581706,-46.712002},{-23.581498,-46.711806},{-23.581448,-46.711758},{-23.581081,-46.711508},{-23.580189,-46.710986},{-23.579928,-46.710844},{-23.579705,-46.710676},{-23.579676,-46.710648},{-23.579468,-46.710425},{-23.579342,-46.710294},{-23.579196,-46.710083},{-23.578974,-46.709698},{-23.578601,-46.709069},{-23.578542,-46.708966},{-23.578484,-46.708878},{-23.578343,-46.708681},{-23.578155,-46.708478},{-23.577916,-46.708258},{-23.577729,-46.708133},{-23.577608,-46.708071},{-23.576800,-46.707710},{-23.576611,-46.707620},{-23.575235,-46.706986},{-23.574803,-46.706778},{-23.574448,-46.706609},{-23.574090,-46.706456},{-23.573797,-46.706281},{-23.573681,-46.706209},{-23.573585,-46.706112},{-23.573489,-46.706010},{-23.573403,-46.705879},{-23.572891,-46.704785},{-23.572694,-46.704417},{-23.572592,-46.704239},{-23.572465,-46.704025},{-23.572404,-46.703808},{-23.572351,-46.703424},{-23.572307,-46.703150},{-23.572257,-46.702895},{-23.572115,-46.702402},{-23.571917,-46.701927},{-23.571519,-46.700936},{-23.571446,-46.700638},{-23.571410,-46.700425},{-23.571394,-46.700137},{-23.571378,-46.699815},{-23.571365,-46.699657},{-23.571312,-46.699399},{-23.571245,-46.699223},{-23.571147,-46.699036},{-23.571038,-46.698880},{-23.570990,-46.698826},{-23.570265,-46.698047},{-23.569754,-46.697514},{-23.569596,-46.697385},{-23.568587,-46.697119},{-23.568355,-46.697023},{-23.568218,-46.696934},{-23.568102,-46.696797},{-23.567966,-46.696526},{-23.567934,-46.696452},{-23.567609,-46.696520},{-23.567108,-46.696522},{-23.566711,-46.696538},{-23.566169,-46.696527},{-23.565882,-46.696525},{-23.565314,-46.696521},{-23.565247,-46.696520},{-23.565252,-46.696592},{-23.565351,-46.698138},{-23.565284,-46.699165},{-23.565220,-46.699247},{-23.565116,-46.700079},{-23.565012,-46.701063},{-23.565459,-46.701094} ]]),

	TR4 = class_Actor:create_initial_actor( class_Route,
		[ _TNRoute4="bus_route_4", _TRoute4=[ {-23.565459,-46.701094},{-23.565870,-46.701125},{-23.566375,-46.701129},{-23.567102,-46.701159},{-23.567324,-46.701160},{-23.567470,-46.700867},{-23.567663,-46.700479},{-23.567729,-46.700424},{-23.567804,-46.700401},{-23.567885,-46.700396},{-23.569624,-46.700265},{-23.570207,-46.700203},{-23.570585,-46.700237},{-23.570939,-46.700199},{-23.571029,-46.700203},{-23.571115,-46.700235},{-23.571187,-46.700295},{-23.571268,-46.700385},{-23.571334,-46.700520},{-23.571519,-46.700936},{-23.571917,-46.701927},{-23.572010,-46.702321},{-23.572022,-46.702522},{-23.571999,-46.703066},{-23.572016,-46.703285},{-23.572059,-46.703479},{-23.572113,-46.703638},{-23.572225,-46.703905},{-23.572289,-46.704077},{-23.572346,-46.704274},{-23.572379,-46.704454},{-23.572355,-46.704756},{-23.572060,-46.705763},{-23.572013,-46.705911},{-23.571970,-46.706045},{-23.571958,-46.706085},{-23.571847,-46.706157},{-23.570888,-46.706775},{-23.571374,-46.707636},{-23.571435,-46.707744},{-23.571498,-46.707801},{-23.571573,-46.707838},{-23.572454,-46.708188},{-23.572351,-46.708506},{-23.572287,-46.708705},{-23.572369,-46.709119},{-23.572535,-46.709761},{-23.572925,-46.711250},{-23.573077,-46.711913},{-23.573192,-46.712381},{-23.573307,-46.712849},{-23.573538,-46.713532},{-23.573877,-46.714504},{-23.573961,-46.714779},{-23.574034,-46.715066},{-23.574111,-46.715310},{-23.574214,-46.715556},{-23.574395,-46.715951},{-23.574645,-46.716466},{-23.574890,-46.716957},{-23.575028,-46.717156},{-23.575100,-46.717252},{-23.575404,-46.717616},{-23.575442,-46.717665},{-23.575600,-46.717909},{-23.575672,-46.718053},{-23.575748,-46.718247},{-23.575790,-46.718464},{-23.575807,-46.718681},{-23.575787,-46.718923},{-23.575750,-46.719203},{-23.575694,-46.719921},{-23.575686,-46.720135},{-23.575704,-46.720336},{-23.575746,-46.720518},{-23.575815,-46.720679},{-23.575918,-46.720838},{-23.576110,-46.721111},{-23.576272,-46.721374},{-23.576611,-46.721878},{-23.576755,-46.722126},{-23.576894,-46.722391},{-23.576984,-46.722638},{-23.577244,-46.723548},{-23.577445,-46.724335},{-23.577625,-46.725029},{-23.577742,-46.725411},{-23.577841,-46.725687},{-23.578617,-46.727621},{-23.578804,-46.728040},{-23.578917,-46.728211},{-23.579040,-46.728339},{-23.579165,-46.728447},{-23.579300,-46.728533},{-23.579459,-46.728593},{-23.579738,-46.728675},{-23.580208,-46.728829},{-23.580336,-46.728892},{-23.580447,-46.728976},{-23.580563,-46.729104},{-23.580655,-46.729242},{-23.580902,-46.729803},{-23.581234,-46.730575},{-23.581310,-46.730744},{-23.581547,-46.731273},{-23.582112,-46.732573},{-23.582392,-46.733165},{-23.582596,-46.733513},{-23.582791,-46.733819},{-23.583008,-46.734170},{-23.583367,-46.734799},{-23.583538,-46.735207},{-23.583938,-46.736526},{-23.584067,-46.736932},{-23.584123,-46.737085},{-23.584199,-46.737391},{-23.584285,-46.737878},{-23.584302,-46.737980},{-23.584357,-46.738196},{-23.584397,-46.738322},{-23.584550,-46.738319},{-23.584626,-46.738300},{-23.585050,-46.738093},{-23.585101,-46.738056},{-23.585154,-46.737964},{-23.585224,-46.737856},{-23.585304,-46.737796},{-23.586195,-46.737380},{-23.587005,-46.736997},{-23.587392,-46.736813},{-23.588548,-46.736281},{-23.589547,-46.735786},{-23.589645,-46.735787},{-23.589699,-46.735793},{-23.589757,-46.735812},{-23.589825,-46.735852},{-23.589993,-46.736012},{-23.590096,-46.736303},{-23.590283,-46.736775},{-23.590329,-46.736889},{-23.590566,-46.737386},{-23.590812,-46.737854},{-23.590856,-46.737937},{-23.590952,-46.737887},{-23.591012,-46.737856},{-23.591345,-46.737688},{-23.591394,-46.737663},{-23.592738,-46.736983},{-23.593956,-46.736366},{-23.594055,-46.736316},{-23.594512,-46.737349},{-23.595093,-46.738664},{-23.595194,-46.738806},{-23.595629,-46.739134},{-23.596101,-46.739474},{-23.596158,-46.739516},{-23.596685,-46.739895},{-23.597078,-46.740179},{-23.598022,-46.740794},{-23.598076,-46.740824},{-23.598184,-46.740884},{-23.598468,-46.741042},{-23.599200,-46.741465},{-23.599708,-46.741828},{-23.600015,-46.742095},{-23.600202,-46.742257},{-23.600482,-46.742496},{-23.600544,-46.742548},{-23.601122,-46.743039},{-23.601203,-46.743108},{-23.601633,-46.743496},{-23.602200,-46.744002},{-23.602395,-46.744152},{-23.602570,-46.744248},{-23.602650,-46.744308},{-23.602745,-46.744379},{-23.602970,-46.744512},{-23.603167,-46.744631},{-23.604224,-46.745277},{-23.604697,-46.745696},{-23.605197,-46.746255},{-23.605380,-46.746571},{-23.605414,-46.746632},{-23.605775,-46.747174},{-23.605922,-46.747456},{-23.605972,-46.747553},{-23.606083,-46.747805},{-23.606313,-46.748506},{-23.607024,-46.750944},{-23.607082,-46.751134},{-23.607255,-46.751450},{-23.607481,-46.751617},{-23.607575,-46.751671},{-23.607675,-46.751690},{-23.607925,-46.751716},{-23.608318,-46.751783},{-23.608666,-46.751873},{-23.608872,-46.751901},{-23.609211,-46.752064},{-23.609382,-46.752179},{-23.609463,-46.752232},{-23.609593,-46.752315},{-23.609736,-46.752377},{-23.609915,-46.752426},{-23.610110,-46.752448},{-23.610387,-46.752532},{-23.610473,-46.752591},{-23.610534,-46.752658},{-23.611007,-46.753313},{-23.611320,-46.753885},{-23.611520,-46.754226},{-23.611528,-46.754240},{-23.611574,-46.754339},{-23.611631,-46.754357},{-23.611962,-46.754478},{-23.612216,-46.754577},{-23.612347,-46.754660},{-23.612608,-46.754831},{-23.612828,-46.755011},{-23.613160,-46.755231},{-23.613427,-46.755367},{-23.614138,-46.755652},{-23.614355,-46.755746},{-23.614570,-46.755877},{-23.614793,-46.756033},{-23.615399,-46.756542},{-23.615698,-46.756811},{-23.615977,-46.756974},{-23.616766,-46.757368},{-23.616969,-46.757513},{-23.617332,-46.757831},{-23.617552,-46.758094},{-23.617766,-46.758390},{-23.617931,-46.758533},{-23.618071,-46.758588},{-23.618219,-46.758603},{-23.618380,-46.758576},{-23.618587,-46.758498},{-23.618765,-46.758426},{-23.619523,-46.758137},{-23.619940,-46.757978},{-23.620439,-46.757787},{-23.620749,-46.757722},{-23.620926,-46.757729},{-23.621101,-46.757761},{-23.621359,-46.757856},{-23.621562,-46.757988},{-23.621720,-46.758136},{-23.621833,-46.758289},{-23.621943,-46.758472},{-23.622052,-46.758763},{-23.622084,-46.758934},{-23.622098,-46.759617},{-23.622163,-46.760578},{-23.622248,-46.761045},{-23.622328,-46.761525},{-23.622424,-46.762008},{-23.622563,-46.762563},{-23.622816,-46.763152},{-23.623092,-46.763555},{-23.623200,-46.763718},{-23.623539,-46.764075},{-23.623829,-46.764279},{-23.624060,-46.764379},{-23.624374,-46.764529},{-23.624654,-46.764674},{-23.625099,-46.765044},{-23.626291,-46.766045},{-23.627478,-46.767037},{-23.627832,-46.767343},{-23.627996,-46.767493},{-23.628019,-46.767516},{-23.628061,-46.767558},{-23.628215,-46.767713},{-23.628523,-46.768081},{-23.628741,-46.768452},{-23.629314,-46.769545},{-23.629411,-46.769650},{-23.629598,-46.769853},{-23.629804,-46.770044},{-23.630508,-46.770753},{-23.630683,-46.770912},{-23.631000,-46.771185},{-23.631479,-46.771576},{-23.631586,-46.771665} ]]),


	T1Routes = [ TR1 , TR2 ],

	T2Routes = [ TR3 ],

	T3Routes = [ TR4 ],

	_T1 = class_Actor:create_initial_actor( class_Terminal,
		[ _T1NAME="terminal_bandeira", _T1LAT=-23.549247, _T1LONG=-46.639614, _TRoutes1 = T1Routes ] ),


	_T2 = class_Actor:create_initial_actor( class_Terminal,
		[ _T2NAME="terminal_campo_limpo", _T2LAT=-23.631574, _T2LONG=-46.771683, _TRoutes2 = T2Routes ] ),

	_T3 = class_Actor:create_initial_actor( class_Terminal,
		[ _T3NAME="terminal_pinheiros", _T3LAT=-23.565464, _T3LONG=-46.701019, _TRoutes3 = T3Routes ] ),

	% We want this test to end once a specified virtual duration elapsed, in
	% seconds:
	SimulationDuration = 100000,

	DeploymentManagerPid ! { getRootTimeManager, [], self() },
	RootTimeManagerPid = test_receive(),

	?test_info_fmt( "Starting simulation, for a stop after a duration "
					"in virtual time of ~Bms.", [ SimulationDuration ] ),

	RootTimeManagerPid ! { startFor, [ SimulationDuration, self() ] },

	?test_info( "Waiting for the simulation to end, "
				"since having been declared as a simulation listener." ),

	receive

		simulation_stopped ->
			?test_info( "Simulation stopped spontaneously, "
						"specified stop tick must have been reached." )

	end,

	?test_info( "Browsing the report results, if in batch mode." ),
	class_ResultManager:browse_reports(),

	sim_diasca:shutdown(),

	?test_stop.
